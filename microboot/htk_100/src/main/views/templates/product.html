<!doctype html>
<html lang="en">
	<head>
	  	<meta charset="utf-8">
	    <title></title>
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	    <meta name="keywords" content="" />
	    <meta name="description" content="" /> 
	    <meta name="author" content="" />
	    <meta name="copyright" content="" />
  	</head>

<body>
	<div th:include="head :: onloadCSS"></div>
	<div th:include="foot :: onloadJS"></div>
	<div th:include="commonHeader :: onloadHeader"></div>
  	<div id="app">
  	  <!--Cart Detail -->
	  <section id="cart" class="padding_bottom">
	    <div class="container">
	      <div class="row">
	      	<div class="col-sm-12">
	      		<h3 class="product_title">{{goodsinfo.goodsTitle}}</h3>
	      	</div>
	        <div class="col-sm-12">
	          <div id="product_owl" class="owl-carousel fourCol-slider-commonStyle">
	              <div class="item" v-for="item in goodsImgArr">
	                <div class="product_wrap">
	                  <div class="image">
	                    <a href="#">
	                      <img :src="'http://www.hkt100.com/' + item.thumbUrl" alt="Product" class="img-responsive">
	                    </a>
	                  </div>
	                </div>
	              </div>
	            </div>
	        </div>
	      </div>
	    </div>
	  </section>
	
	  <section class="bottom_half">
	    <div class="container">
	      <div class="row">
	        <div class="clearfix col-md-12">
	          <div class="shop_tab">
	            <ul class="tabs">
	              <li class="active" rel="tab1">
	                <h4 class="heading uppercase">商品详情</h4>
	              </li>
	              <li rel="tab2">
	                <h4 class="heading uppercase">商品参数</h4>
	              </li>
	            </ul>
	            <div class="tab_container">
	              <div id="tab1" class="tab_content" v-html="goodsinfo.goodsDesc"></div>
	
	              <div id="tab2" class="tab_content">
	                <table class="goods_attr_table table table-bordered table-striped table-hover">
	                	<thead>
	                		<th colspan="2">商品属性</th>
	                	</thead>
	                	<tbody>
	                		<tr v-for="item in goodsAttr">
	                			<td width="19%">{{item.attrName}}</td>
	                			<td width="81">{{item.attrValue}}</td>
	                		</tr>
	                	</tbody>
	                </table>
	              </div>
	          </div>
	        </div>
	      </div>
	    </div>
	  </section>
	  
	  <!--Footer-->
	  <footer class="padding_top bottom_half">
	    <a href="#." class="go-top text-center"><i class="fa fa-angle-double-up"></i></a>
	    <div class="container">
	      <div class="row">
	        <div class="col-md-3 col-sm-6">
	          <div class="footer_panel content_space">
	            <h4 class="heading_border heading_space">about store</h4>
	            <ul class="about_foot">
	              <li><i class="fa fa-home"></i>234 Heaven Stress, Beverly Hill.</li>
	              <li><i class="fa fa-phone"></i>800) 123 456 789</li>
	              <li><a href="#."><i class="fa fa-envelope-o"></i>Contact@erentheme.com</a>
	              </li>
	              <li>
	                <span><img src="images/paymennt1.png" alt="payment"></span>
	                <span><img src="images/payment2.png" alt="payment"></span>
	                <span><img src="images/payment3.jpg" alt="payment"></span>
	                <span><img src="images/payment4.png" alt="payment"></span>
	                <span><img src="images/payment5.png" alt="payment"></span>
	              </li>
	            </ul>
	          </div>
	        </div>
	        <div class="col-md-3 col-sm-6">
	          <div class="footer_panel content_space">
	            <h4 class="heading_border heading_space">My Account</h4>
	            <ul class="account_foot">
	              <li><a href="#.">My Account</a>
	              </li>
	              <li><a href="#.">Login</a>
	              </li>
	              <li><a href="#.">My Cart</a>
	              </li>
	              <li><a href="#.">Wishlist</a>
	              </li>
	              <li><a href="#.">Checkout</a>
	              </li>
	              <li><a href="#.">Userinfo</a>
	              </li>
	            </ul>
	          </div>
	        </div>
	        <div class="col-md-3 col-sm-6">
	          <div class="footer_panel content_space">
	            <h4 class="heading_border heading_space">INFORMATION</h4>
	            <ul class="account_foot">
	              <li><a href="#.">My Account</a>
	              </li>
	              <li><a href="#.">Login</a>
	              </li>
	              <li><a href="#.">My Cart</a>
	              </li>
	              <li><a href="#.">Wishlist</a>
	              </li>
	              <li><a href="#.">Checkout</a>
	              </li>
	              <li><a href="#.">Userinfo</a>
	              </li>
	            </ul>
	          </div>
	        </div>
	        <div class="col-md-3 col-sm-6">
	          <div class="footer_panel content_space">
	            <h4 class="heading_border heading_space">Customer Service</h4>
	            <ul class="account_foot">
	              <li><a href="#.">Shipping Policy</a>
	              </li>
	              <li><a href="#.">Compensation First</a>
	              </li>
	              <li><a href="#.">My Account</a>
	              </li>
	              <li><a href="#.">Return Policy</a>
	              </li>
	              <li><a href="#.">Contact Us</a>
	              </li>
	              <li><a href="#.">Shipping Info</a>
	              </li>
	            </ul>
	          </div>
	        </div>
	      </div>
	    </div>
	  </footer>
	  <div class="copyright">
	    <div class="container">
	      <div class="row">
	        <div class="col-sm-4">
	          <p style="font-family:'Microsoft Yahei'; font-style: normal;">&copy; 2018 XX公司&nbsp;&nbsp;ICP备XXXXXXXX号&nbsp;&nbsp;技术支持：<a href="http://www.jsdaima.com/" title="js代码" target="_blank">js代码</a></p>
	        </div>
	        <div class="col-sm-8">
	          <ul class="social">
	            <li><a href="#."><i class="fa fa-facebook"></i></a>
	            </li>
	            <li><a href="#."><i class="fa fa-twitter"></i></a>
	            </li>
	            <li><a href="#."><i class="fa fa-rss"></i></a>
	            </li>
	            <li><a href="#."><i class="fa fa-google-plus"></i></a>
	            </li>
	            <li><a href="#."><i class="fa fa-linkedin"></i></a>
	            </li>
	          </ul>
	        </div>
	      </div>
	    </div>
	  </div>
  	</div>
	<script type="text/javascript">
	    new Vue({
	        el: "#app",
	        data: {
	            goodsinfo : {
	            	goodsDesc : '',
	            	goodsTitle:'',
	            },
	            goodsAttr : [],
	            goodsImgArr : [],
	        },
	        watch: {
	            'goodsImgArr':function (){
	            	this.$nextTick(function () {
			        	this.initOwl();
			        })
	            }
	
	        },
	        init : function (){
	        	this.$nextTick(function () {
		        	
		        })
	        },
	        created: function () {
	        	var gid = this.getGid("gid");
	        	console.log(gid)
	        	this.getData(gid);
	        	this.getAttr(gid);
	        	this.getImgArr(gid);
	        },
	        updated: function () {
	            this.$nextTick(function () {
	                
	            })
	        },
	        mounted: function () {
	            
	        },
	        methods: {
	            initOwl : function (){
	            	this.$nextTick(function () {
		            	$('#product_owl').owlCarousel({
		        	        autoPlay: false,
		        	        pagination : true,
		        	        navigation : false,
		        	        items : 4,
		        	        itemsDesktop : [1199,3],
		        	        itemsDesktopSmall : [979,2],
		        	        itemsMobile:[500,2],
		        	     })
        			})
	            },
	            getData : function (gid){
	            	var that = this;
	            	$.ajax({
	            		url : '/goods/getbyid',
	            		data : {gid:gid},
	            		type : "post",
	            		success : function (data){
	            			data = JSON.parse(data);
	            			if(data.goodsName){
		            			document.title = data.goodsName;
	            			}
	            			that.$nextTick(function () {
	                			that.goodsinfo.goodsDesc = data.goodsDesc;
	                			that.goodsinfo.goodsTitle = data.goodsName;
	            			})
	            		}
	            	})
	            },
	            getAttr : function (gid){
	            	var that = this;
	            	$.ajax({
	            		url : '/goods/getAttr',
	            		data : {gid:gid},
	            		type : "post",
	            		success : function (data){
	            			data = JSON.parse(data);
	            			that.$nextTick(function () {
	                			that.goodsAttr = data;
	            			})
	            		}
	            	})
	            },
	            getImgArr :function (gid){
	            	var that = this;
	            	$.ajax({
	            		url : '/goods/getImg',
	            		data : {gid:gid},
	            		type : "post",
	            		success : function (data){
	            			data = JSON.parse(data);
	            			that.$nextTick(function () {
	                			that.goodsImgArr = data;
	            			})
	            		}
	            	})
	            },
	            getGid : function (str){
	            	var url = window.location.href;
	            	var that = this;
	            	var finalValue = '';
	            	if(url.indexOf("?") >= 0){
	            		var urlarr = url.split("?");
	            		if(urlarr[1].indexOf("&") >= 0){
	            			var newurlarr = urlarr[1].split("&");
	            			for(var i=0;i<newurlarr.length;i++){
	            				if(newurlarr[i].indexOf(str) >= 0){
	            					finalValue = that.getUrlValue(newurlarr[i],str);
	            					return false;
	            				}
	            			}
	            		}else{
	            			finalValue = that.getUrlValue(urlarr[1],str);
	            		}
	            	}
	            	return finalValue;
	            },
	            getUrlValue : function (arr,str){
	            	var curr_url = arr.split(str+'=');
	            	return curr_url[1];
	            }
	        }
	    });
   </script>
</body>

</html>
